<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="/imgs/favicon.png">
  <meta charset="utf-8">
  <script type="importmap">
      {
	"imports": {
	  "three": 
	      "https://unpkg.com/three@v0.154.0/build/three.module.js",
	  "three/addons/":
	      "https://unpkg.com/three@v0.154.0/examples/jsm/"
	}
      }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" 
           integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" 
           crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@latest"></script>

<style>
  .dlgFrame {
    border-radius: 16px 16px 16px 16px;
    box-shadow: 3px 3px 5px #535353;
    background: lightYellow;
  }

</style>
</head>
<!--------------------------- END HEADERS ------------------------->

<script type=module>
  import  {THREE, GUI, loader, scene, camera, 
           getRenderer, relRenderer} from "./init.js" ;
  import {Plane} from "./plane.js" ;
  import {Rots} from "./rots.js" ;
  import {light, dlight, lightGUI} from  "./lights.js" ;
  import {setColor, setPos, sleep,
          measure, saveScene} from "./util.js" ;
//  import {OrbitControls} from 'three/addons/controls/OrbitControls'

  let plane = await Plane () ;
  scene.add (plane) ;
  scene.add (light); 
  scene.add (dlight);
  var renderer = getRenderer () ;
  //  scene.add (new THREE.AxesHelper(40)) ;

// Generate images and save until done
var rotObj = new Rots (10, 40 * Math.PI / 180.0) ;
genImage () ;
function genImage () {
     renderer.render (scene, camera) ;
     sleep (100).then ( () => {
	     let more = rotObj.rotate (plane)
	     saveScene (rotObj.fname) ;
	     if (more) genImage () ; // recurisive call
            }); 
} // genImages

function animate(){
    requestAnimationFrame (animate);
    // some rotation ito be added
    renderer.render (scene, camera);
  }

document.getElementById("setLight").addEventListener(
       "click",function(){
         setColor(light).showModal();
       });
document.getElementById("setCamPos").addEventListener(
       "click",function(){
         setPos(camera).showModal();
       });
</script>

<!--      WEB PAGE DOM ELEMENTS  ------>
<body>
  <div class=container>
    <h2>Payload Thermal Model </h2>
   <button id="setLight">setLight</button>
   <button id="setCamPos">setCamPos</button>
  </div>
</body>
</html>
